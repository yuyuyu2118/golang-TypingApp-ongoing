# メイン機能
<!-- - 所持金を追加、画面左上に表示
  - 実装・topLeftPosで位置を指定しテキストを表示、敵を倒すとランダムで増える -->
<!-- - スキルの横に体力バーを表示
  - 敵の攻撃を受けると減る -->
<!-- - 敵の攻撃による死亡判定の追加、お金をおとす機能はサブ機能とする -->
<!-- - StartScreenのあとにGoToScreenを設置
  - 1.dungeon(stage) 2.town 3.equipment 4.Job 5.save 6.exit -->
    -equipmentは所持金、装備内容、所持武器防具アクセサリーを表示
<!-- - TownScreenの実装
  - 1.WeaponShop 2.ArmorShop 3.AccessoryShop 4.BlackSmith 5.Equipment 6.Exit -->
- Shopの実装
  - 各お店で、1.Buy 2.Sell 3.Exit
  - 1.Buy
    - Weapon.csv ID,武器名,攻撃力,説明,強化可能回数(3or1),強化上昇値1,強化上昇値2,特殊能力
    - Armor.csv ID,防具名,防御力,説明,強化可能回数(3or1),強化上昇値1,強化上昇値2,特殊能力
    - Accessory.csv ID,装飾名,説明,上昇項目1,上昇値1,上昇項目2,上昇値2,特殊能力
    - BlackSmith.csv 強化済み武器,強化レベル
  <!-- - 2.Sell
    - サブ機能として実装 -->
<!-- - タイプ箇所を灰色にする
  - 実装・正解描画した幅から計算？ -->
<!-- - 自分の職業を左上のコインの下に表示？スキルの上でもいい
- initPlayerを作成して、initPlayerGoldやinitPlayerJobをまとめる。それぞれのoffSetから相対位置を算出する、引数にoffSetを追加する
  - Player.goに記述 -->
<!-- - endScreenに素材ドロップ等の情報を表示、ドロップコインも表示終了画面の充実化 -->
- CsvToSliceをcsvioに移動
- playerStatusのインスタンス化をsaveファイルに記録する、csvファイルに記録
<!-- - 日本語対応 -->
- 武器は、素材だけを表示し、素材が手に入ったものだけ表示する
- 装備画面を持ち物に変える
  - 持ち物画面で1-4を押すと、武器防具アクセサリー、素材に切り替わる
  - 素材画面はCSVで読み込んだ通りに表示、yOffsetが一定の値、もしくは一定の繰り返しが終了すると折り返すように変更

- 購入画面で素材が足りていると、足りている素材が緑色に、足りていない素材を赤色に変化、買えるかを判定するboolがtrueなら買うボタンが緑色になり素材とお金が減り、購入できる。
  - その武器に必要な素材だけを取り出して所持数を素材の横に表示

- 購入画面を作成したweaponインスタンスから直接文字列を参照する形から、数値を参照するように変更

- ブラックスミスでは基本素材強化、宝石アンロック、モディファイア抽選、
  - 基本強化では主に攻撃力があがる
  - 宝石アンロックでは、攻撃力大幅+アタックタイマー(上限あり)
  - モディファイア抽選はそのまま

- レアドロは色分ける(宝石類)

- 武器は1つずつしか持てないように変更
- 全武器名を、〜のようなキーボードに変更

Weapon.csv
所持bool,武器名,攻撃力,アタックタイマー,作成費用,作成素材1,素材個数1,作成素材2,素材個数2,作成素材3,素材個数3,説明1,説明2,説明3,特殊能力名1,特殊能力2,基本カラー,強化費用,基本強化素材1,個数1,基本強化素材2,個数2,基本強化素材3,個数3,強化攻撃上昇値,1回目宝石必要量1,1目宝石必要量2,1回目宝石必要量3,1回目宝石必要量4,2回目宝石必要量1,2回目宝石必要量2,2回目宝石必要量3,2回目宝石必要量4,1回目宝石アンロック攻撃上昇値,1回目宝石アンロックアタックタイマー上昇値,2回目宝石アンロック攻撃上昇値,2回目宝石アンロックアタックタイマー上昇値,1回目宝石アンロック特殊能力bool,2回目宝石アンロック特殊能力bool,モディファイア抽選ベース資金,

false,木の棒,0.5,0.5,100,木の枝,3,針金,2,糸,1,説明1,説明2,説明3,なし,なし,茶色,100,木の枝,1,針金,1,糸,1,0.25,3,0,0,0,5,0,0,0,1,0.5,2,0.5,false,false,150,


Weaponもcsv分けたい


# サブ機能
- 敵が攻撃を受けたときに、ダメージを表現
  - 実装・Movedを使って、敵のpictureのcenterからすこしずらした位置にMovedを数回繰り返し、pictureの色を薄い赤色にする
- 敵の攻撃モーション
  - 実装・一旦scaledで小さくなり、その後scaledで大きくなって攻撃する
- 敵にやられると所持金が減少する、減少分は敵がドロップするお金と同じ乱数
- 名前を実装
  - スタート画面の右上に入力でき、変更も可能

- セーブ機能の実装
  - 所持金、装備、プレイヤーのレベル、スコア、名前を保存、100セーブ以降は古いものから削除
- スコアボードの追加
  - まずは自分のスコアだけを記録、順位をつけて、上位100件のみ保存しておく

- 体力が少なくなるにつれて、画面全体のテキストの色が赤っぽくなっていく
- dungeonの文言とstageの文言をdungeon側に統一
- 多言語対応
  - 英語と日本語
- アクセサリーの強化要素、敵からドロップする強化石をセット？
- 売却機能の追加
- dungeon潜入時にカウントダウン追加
- 敵の行動内容追加
  - 敵情報を格納するcsvファイルの作成検討
    - 敵情報csv ID,敵名,最大体力,体力,攻撃力,防御力,所持金の中央値,所持金のドロップ乱数,ドロップ品1,ドロップ確率1,ドロップ品2,ドロップ確率2,ドロップ品3,ドロップ確率3
    - 敵のID毎の行動内容csv 行動1,行動2,,,
- 戦闘画面の長い単語が重なる事象を解決
  -すべて一つの配列で管理,スペース区切りで判定,20文字以内で流れてくるイメージ
-体力残りわずかなところでスキルを使うとバグる
- 敵の攻撃ゲージの追加
  - 一定時間経過後(敵のenemy.Speedを参照)に攻撃を行い、初期値に戻す　enemy.goに追加
- テキストの描画をfor文で回して、その関数をさらに薄くするために、別の関数に分ける
  - 文字のスライスとボタンのスライス、位置、テキスト同士の幅、y座標の初期位置を入力として与えてリストにする関数を作成する(Align関数的な)

# バグ修正
- 戦闘画面で最初にEnemyAttackが表示される
- 戦闘終了画面で、ダメージの表示が残る
- ボタンを押したとき、マウスがおかれていたらそこのイベントが発生する
  - キーボード入力を優先させる
  - 装備画面のボタンの当たり判定を追加していない

text.RangeTable(unicode.P)とは

